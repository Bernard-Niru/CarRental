@model CarRental.ViewModels.CustomerViewModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdLayout.cshtml";
}





<meta charset="UTF-8" />
<title>Car Rentals</title>

<link rel="stylesheet" href="~/css/customer.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet" />
<link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link rel="stylesheet" href="~/css/Header.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/GuestPage.css" asp-append-version="true" />

<div class="swiper">
    <div class="swiper-wrapper">
        @if (Model.TopCars != null && Model.TopCars.Any())
        {
            foreach (var car in Model.TopCars)
            {
                var img = car.Images.FirstOrDefault()?.ImageBase64;
                var imageUrl = img != null
                ? $"data:image/png;base64,{img}"
                : Url.Content("~/images/road-blue-car-50704.png");

                <text>
                    <div class="swiper-slide" style="background-image:url('@imageUrl');">
                        <div class="overlay">
                            <h5>@car.CarName</h5>
                            <p>Brand: @car.Brand.BrandName</p>
                            <p>Seats: @car.No_of_Seats</p>
                            <p class="rating-line">Rating: @car.Ratings <span>⭐</span></p>
                            <p>Rent Per day: @car.RentalRate.ToString()</p>
                            <button type="button"
                                    class="btn btn-sm px-4 request-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#addCarModal"
                                    data-carname="@car.CarName"
                                    data-carid="@car.CarID"
                                    data-rentalrate="@car.RentalRate"
                                    data-brand="@car.Brand.BrandName">
                                Book
                            </button>
                        </div>
                    </div>
                </text>
            }
        }
        else
        {
            <p>No top cars found.</p>
        }
    </div>

    <div class="swiper-pagination"></div>
</div>


<!-- Car Catalog -->
@await Html.PartialAsync("_RequestPartial", new CarRental.ViewModels.RequestViewModel())

<div class="row g-4 justify-content-center">
    @{
        int delay = 0;
    }
    @if (Model?.TopCars != null && Model.TopCars.Any())
    {

        @foreach (var car in Model.Cars)
        {
            delay += 100;
            var carouselId = $"carousel_{car.CarID}";

            <div class="col-sm-6 col-md-4" data-aos="zoom-in" data-aos-delay="@delay">
                <div class="card h-100 shadow-sm border-0">
                    <!-- Carousel -->
                    <div id="@carouselId" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            @for (int i = 0; i < car.Images.Count; i++)
                            {
                                var imgBase64 = car.Images[i].ImageBase64;

                                <div class="carousel-item @(i == 0 ? "active" : "")">
                                    <img src="data:image/jpeg;base64,@imgBase64" class="d-block car-image"
                                         alt="@car.Brand.BrandName @car.CarName Image @(i + 1)" />
                                </div>


                            }
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#@carouselId" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#@carouselId" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>

                    <!-- Badges -->
                    <div class="d-flex justify-content-center flex-wrap gap-2 p-2">
                        <span class="badge bg-secondary">@car.CarType <i class="bi bi-car-front-fill ms-1"></i></span>
                        <span class="badge bg-secondary">@car.FuelType <i class="bi bi-fuel-pump-fill ms-1"></i></span>
                        <span class="badge bg-secondary">@car.GearType <i class="bi bi-gear-fill ms-1"></i></span>
                        <span class="badge bg-secondary">@car.Ratings <i class="bi bi-star-fill ms-1"></i></span>
                        <span class="badge bg-secondary">@car.No_of_Seats <i class="bi bi-people-fill ms-1"></i></span>
                        <span class="badge"
                              style="background-color:@(car.Color ?? "transparent");width:20px; height:20px; border-radius:50%; border:1px solid black;">
                        </span>
                    </div>

                    <!-- Info -->
                    <div class="card-body text-center">
                        <h5 class="card-title">@car.CarName</h5>
                        <h6 class="card-subtitle mb-2 text-muted">@car.Brand.BrandName</h6>
                        <p class="text-success fw-bold fs-5">Rs @car.RentalRate.ToString("N0") / Day</p>
                        <button type="button"
                                class="btn btn-sm px-4 request-btn"
                                data-bs-toggle="modal"
                                data-bs-target="#addCarModal"
                                data-carname="@car.CarName"
                                data-carid="@car.CarID"
                                data-rentalrate="@car.RentalRate"
                                data-brand="@car.Brand.BrandName">
                            Book
                        </button>
                    </div>
                </div>
            </div>
        }
    }
</div>

<br />
<br />

<section class="search-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10" data-aos="zoom-in">
                <div class="bg-white p-4 p-md-5 rounded shadow d-flex flex-column flex-lg-row align-items-stretch">
                    <div class="col-md-7">
                        <h2 class="fw-bold mb-1">Search car rentals</h2>
                        <p class="text-muted mb-4">Find the best car rental deals</p>
                        <form>
                            <!-- Car Brand Input -->
                            <div class="form-group mb-3">
                                <label for="brandFilter" class="form-label visually-hidden">Car Brand</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-tag"></i></span>
                                    <select id="brandFilter" class="form-select stylish-input">
                                        <option value="">-- All Brands --</option>
                                        @if (Model?.BrandOptions != null && Model.BrandOptions.Any())
                                        {
                                            foreach (var brand in Model.BrandOptions)
                                            {
                                                <option value="@brand.Value">@brand.Text</option>
                                            }
                                        }
                                        else
                                        {
                                            <option disabled>No brands available</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <!-- Car Name Input -->
                            <div class="mb-3">
                                <label for="carName" class="form-label visually-hidden">Car Name</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-car-front"></i></span>
                                    <input type="text" id="carName" class="form-control" placeholder="Car Name">
                                </div>
                            </div>
                            <!-- Color Input -->
                            <div class="form-group mb-3">
                                <label for="color-select" class="form-label visually-hidden">Color</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-palette"></i></span>
                                    <select class="form-select stylish-input" id="color-select" name="Color">
                                        <option value="">-- Select Color --</option>
                                        <option value="White" style="background-color: white; color: black;">White</option>
                                        <option value="Black" style="background-color: black; color: white;">Black</option>
                                        <option value="Red" style="background-color: red; color: white;">Red</option>
                                        <option value="Blue" style="background-color: blue; color: white;">Blue</option>
                                        <option value="Silver" style="background-color: silver; color: black;">Silver</option>
                                        <option value="Gray" style="background-color: gray; color: white;">Gray</option>
                                        <option value="Green" style="background-color: green; color: white;">Green</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <input type="text" id="custom-color-input" class="form-control mt-2 stylish-input" placeholder="Enter new color" style="display: none;" />
                            </div>
                            <!-- Date and Time Inputs -->
                            <div class="row g-2 mb-3">
                                <div class="col-md-6 datepicker-container">
                                    <div class="input-group">
                                        <input type="text" class="form-control date-input" id="pickup-date-input" placeholder="Pick-up date">
                                        <select class="form-select">
                                            <option>Noon</option>
                                            <option>Morning</option>
                                            <option>Evening</option>
                                        </select>
                                    </div>
                                    <!-- Custom Datepicker HTML -->
                                    <div class="createDatepicker" id="pickup-datepicker">
                                        <!-- Calendar content will be generated by JS -->
                                    </div>
                                </div>
                                <div class="col-md-6 datepicker-container">
                                    <div class="input-group">
                                        <input type="date" class="form-control date-input" id="dropoff-date-input" placeholder="Drop-off date" />
                                        <select class="form-select">
                                            <option>Noon</option>
                                            <option>Morning</option>
                                            <option>Evening</option>
                                        </select>
                                    </div>
                                    <!-- Custom Datepicker HTML -->
                                    <div class="createDatepicker" id="dropoff-datepicker">
                                        <!-- Calendar content will be generated by JS -->
                                    </div>
                                </div>
                            </div>
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">Find Your Car</button>
                                <small class="text-muted d-block text-center mt-2">Book a car with free cancellation for flexibility</small>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-5 ps-lg-5 pt-4 pt-lg-0 d-none d-lg-block">
                        <div class="h-100 p-4 rounded info-box">
                            <h5 class="fw-bold mb-3">Drive Your Dream</h5>
                            <ul class="list-unstyled mb-0">
                                <li class="d-flex align-items-center mb-2">
                                    <i class="bi bi-speedometer2 text-primary me-2"></i>
                                    <span>Wide range of premium cars to suit every journey</span>
                                </li>
                                <li class="d-flex align-items-center mb-2">
                                    <i class="bi bi-star text-primary me-2"></i>
                                    <span>Top-rated customer support, 24/7</span>
                                </li>
                                <li class="d-flex align-items-center mb-2">
                                    <i class="bi bi-wallet2 text-primary me-2"></i>
                                    <span>Competitive prices with no hidden fees</span>
                                </li>
                                <li class="d-flex align-items-center">
                                    <i class="bi bi-shield-lock text-primary me-2"></i>
                                    <span>Safe, clean cars for your peace of mind</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<!-- Scripts -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script src="~/js/animation.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="~/js/Swiper.js"></script>
<script src="~/js/customer.js"></script>

<partial name="_ValidationScriptsPartial" />


